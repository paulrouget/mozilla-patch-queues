# HG changeset patch
# Parent 5724c5ba0f84ef3e2928717e7900c9e11e3d1c13
Bug 712469 - Inspector Rule View selectors can be more visually scannable

diff --git a/browser/devtools/styleinspector/CssRuleView.jsm b/browser/devtools/styleinspector/CssRuleView.jsm
--- a/browser/devtools/styleinspector/CssRuleView.jsm
+++ b/browser/devtools/styleinspector/CssRuleView.jsm
@@ -797,26 +797,27 @@ function RuleEditor(aDoc, aRule)
 
   this._create();
 }
 
 RuleEditor.prototype = {
   _create: function RuleEditor_create()
   {
     this.element = this.doc.createElementNS(HTML_NS, "div");
+    this.element.className = "ruleview-rule";
     this.element._ruleEditor = this;
 
     // Give a relative position for the inplace editor's measurement
     // span to be placed absolutely against.
     this.element.style.position = "relative";
 
     // Add the source link.
     let source = createChild(this.element, "div", {
       class: "ruleview-rule-source",
-      textContent: this.rule.title
+      textContent: "/* " + this.rule.title + " */"
     });
     source.addEventListener("click", function() {
       let rule = this.rule;
       let evt = this.doc.createEvent("CustomEvent");
       evt.initCustomEvent("CssRuleViewCSSLinkClicked", true, false, {
         rule: rule,
       });
       this.element.dispatchEvent(evt);
@@ -960,30 +961,34 @@ TextPropertyEditor.prototype = {
     this.enable.addEventListener("click", this._onEnableClicked, true);
 
     // Click to expand the computed properties of the text property.
     this.expander = createChild(this.element, "span", {
       class: "ruleview-expander"
     });
     this.expander.addEventListener("click", this._onExpandClicked, true);
 
+    var propertyNameAndColon = createChild(this.element, "span", {
+      class: "ruleview-property-name-and-colon"
+    });
+
     // Property name, editable when focused.  Property name
     // is committed when the editor is unfocused.
-    this.nameSpan = createChild(this.element, "span", {
+    this.nameSpan = createChild(propertyNameAndColon, "span", {
       class: "ruleview-propertyname",
       tabindex: "0",
     });
     editableField({
       start: this._onStartEditing,
       element: this.nameSpan,
       done: this._onNameDone,
       advanceChars: ':'
     });
 
-    appendText(this.element, ": ");
+    appendText(propertyNameAndColon, ": ");
 
     // Property value, editable when focused.  Changes to the
     // property value are applied as they are typed, and reverted
     // if the user presses escape.
     this.valueSpan = createChild(this.element, "span", {
       class: "ruleview-propertyvalue",
       tabindex: "0",
     });
@@ -1078,21 +1083,25 @@ TextPropertyEditor.prototype = {
       let li = createChild(this.computed, "li", {
         class: "ruleview-computed"
       });
 
       if (computed.overridden) {
         li.classList.add("ruleview-overridden");
       }
 
-      createChild(li, "span", {
+      var propertyNameAndColon = createChild(li, "span", {
+        class: "ruleview-property-name-and-colon"
+      });
+      createChild(propertyNameAndColon, "span", {
         class: "ruleview-propertyname",
         textContent: computed.name
       });
-      appendText(li, ": ");
+      appendText(propertyNameAndColon, ": ");
+
       createChild(li, "span", {
         class: "ruleview-propertyvalue",
         textContent: computed.value
       });
       appendText(li, ";");
     }
 
     // Show or hide the expander as needed.
diff --git a/browser/devtools/styleinspector/styleinspector.css b/browser/devtools/styleinspector/styleinspector.css
--- a/browser/devtools/styleinspector/styleinspector.css
+++ b/browser/devtools/styleinspector/styleinspector.css
@@ -43,10 +43,10 @@
   display: none;
 }
 
 .ruleview-code {
   direction: ltr;
 }
 
 .ruleview-property:not(:hover) > .ruleview-enableproperty {
-  visibility: hidden;
+  pointer-events: none;
 }
diff --git a/browser/themes/gnomestripe/devtools/arrows.png b/browser/themes/gnomestripe/devtools/arrows.png
index 447d73938398ff2c09efafc33d14c82252229668..308b94ca0bbc7b39c742604b8baba829d26b91e0
GIT binary patch
literal 804
zc$@(w1Ka$GP)<h;3K|Lk000e1NJLTq001xm000OG1^@s6zbkx400001b5ch_0Itp)
z=>Px#24YJ`L;(K){{a7>y{D4^000SaNLh0L01FcU01FcV0GgZ_00007bV*G`2iyY%
z7CRZ4BxEcA00N{*L_t(I%axQ*ixgKB#eer!b&nlJoN*Uii4q8jgG!bm$tDY77J;Z>
z#y~!R*(VF9djyG}!DZ}Gf-WTZ0n|+(gv{U{1hJPPi=Z<DlQ>;nb&rcz-B#-mwKm0j
z@4j=-J@>q8<g?3Ic1y+PpS;6oGqX!X905dB!rj28gF-=c2Qd6y>OOcUd|UYfMxQ{d
z01l*G325Yr$2n9TR4!U;@7Gv<L&e70{{rW;-(b}dBA(-3BL4$eAR<de1mFgYh@D^Y
z;yXeo%z6W`{+kLhTmBqu349LcDd9gud}_#q>1Cu0{EFAB7L-Bt-=eklUbOc7(bpB<
zcg9+spU~(q5e1L|sQmXP?wuq^G!o=9lGZ_x5+5|^n)NQ3Eq}C&;-8syFN2@MnKNVr
zNaufp*p#bDUcf-=KFG(t2Ee@qMMYIC+RW@}r0aw&VDTYQJ;!}CCZ5zD<7M|D4yQAR
zh=MG?RTl*~U?xN=#CvAFClGze-Upom_Jajx5QadYs1vLbehy3A4KqQX8ae#}B?TQI
zBf<$=z;zGz04j(?+^MaS%&2nvD(;<$g}lAzr4>CIGABA|wLg)s{sx}el(>v(dD^;g
z2eg3{No@_rR?I=o)>lA>e9t2dx2`ohyk_nBqo_PZ6g#-LUo)?_?@{i208|t8YZ4YR
zxkMPCE%3h7z1z6`W3rWhYuF(nfmw>50QEuNTbdeICPuBvSGadjc3-3ItGhie6&vfo
zy0zzzq4Fe@LttidKHR!yt@keB9vW_}Pu;~tXcJ;JsksZjE<6N&FkAT;I14(|Y=_jn
zYt~y5JgZ~t0&pYG1{!X!zRh^6t+8h9x#O6=ntqA?5ao}iM``>8ep6bx{Z{zN8g(J@
i<ttD97pVSe?z{luVM#mkZYO*I0000<MNUMnLSTX=xM3*(

diff --git a/browser/themes/gnomestripe/devtools/csshtmltree.css b/browser/themes/gnomestripe/devtools/csshtmltree.css
--- a/browser/themes/gnomestripe/devtools/csshtmltree.css
+++ b/browser/themes/gnomestripe/devtools/csshtmltree.css
@@ -19,16 +19,17 @@
  * the Initial Developer. All Rights Reserved.
  *
  * Contributor(s):
  *   Joe Walker <jwalker@mozilla.com> (original author)
  *   Mihai Șucan <mihai.sucan@gmail.com>
  *   Michael Ratcliffe <mratcliffe@mozilla.com>
  *   Dão Gottwald <dao@mozilla.com>
  *   Rob Campbell <rcampbell@mozilla.com>
+ *   Paul Rouget <paul@mozilla.com>
  *
  * Alternatively, the contents of this file may be used under the terms of
  * either the GNU General Public License Version 2 or later (the "GPL"), or
  * the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
  * in which case the provisions of the GPL or the LGPL are applicable instead
  * of those above. If you wish to allow use of your version of this file only
  * under the terms of either the GPL or the LGPL, and not to allow others to
  * use your version of this file under the terms of the MPL, indicate your
@@ -194,32 +195,40 @@
   margin: 0 5px;
 }
 
 /**
  * CSS Rule View
  */
 
 .ruleview {
-  background-color: #FFF;
+  background-color: #eeeeee;
+}
+
+.ruleview-property-name-and-colon {
+  display: inline-block;
+  min-width: 76px; /* Pseudo indentation */
+  margin-right: 4px;
 }
 
 .ruleview-rule-source {
-  background-color: -moz-dialog;
-  color: #0091ff;
-  padding: 2px 5px;
+  color: #45a946; /* green */
+  padding: 0 5px;
   cursor: pointer;
+  text-align: right;
+  float: right;
 }
 
 .ruleview-rule-source:hover {
   text-decoration: underline;
 }
 
-.ruleview-code {
-  padding: 2px 5px;
+.ruleview-rule {
+  padding: 8px 5px;
+  border-bottom: 1px dotted #cddae5;
 }
 
 .ruleview-warning {
   background: url("chrome://browser/skin/devtools/alerticon-warning.png");
   display: inline-block;
   -moz-margin-start: 5px;
   vertical-align: middle;
   width: 13px;
@@ -238,18 +247,26 @@
   list-style: none;
   padding: 0;
   margin: 0;
 }
 
 .ruleview-enableproperty {
   height: 10px;
   width: 10px;
+  margin: 0;
   -moz-margin-start: 2px;
   -moz-margin-end: 0;
+  -moz-transition: opacity 100ms;
+  -moz-transition-delay: 200ms;
+}
+
+.ruleview-property:not(:hover) > .ruleview-enableproperty {
+  opacity: 0;
+  -moz-transition: none;
 }
 
 .ruleview-expander {
   display: inline-block;
   width: 8px;
   height: 8px;
   background: url("chrome://browser/skin/devtools/arrows.png") 24px 0;
   cursor: pointer;
@@ -265,17 +282,17 @@
   /* (enable checkbox width: 12px) + (expander width: 15px) */
   -moz-margin-start: 27px;
 }
 
 .ruleview-propertyname {
   display: inline-block;
   padding: 1px 0;
   cursor: text;
-  color: #0060C0;
+  color: #dd0058; /* purple */
   text-decoration: inherit;
 }
 
 .ruleview-propertyvalue {
   cursor: text;
   text-decoration: inherit;
 }
 
diff --git a/browser/themes/pinstripe/devtools/arrows.png b/browser/themes/pinstripe/devtools/arrows.png
index 447d73938398ff2c09efafc33d14c82252229668..308b94ca0bbc7b39c742604b8baba829d26b91e0
GIT binary patch
literal 804
zc$@(w1Ka$GP)<h;3K|Lk000e1NJLTq001xm000OG1^@s6zbkx400001b5ch_0Itp)
z=>Px#24YJ`L;(K){{a7>y{D4^000SaNLh0L01FcU01FcV0GgZ_00007bV*G`2iyY%
z7CRZ4BxEcA00N{*L_t(I%axQ*ixgKB#eer!b&nlJoN*Uii4q8jgG!bm$tDY77J;Z>
z#y~!R*(VF9djyG}!DZ}Gf-WTZ0n|+(gv{U{1hJPPi=Z<DlQ>;nb&rcz-B#-mwKm0j
z@4j=-J@>q8<g?3Ic1y+PpS;6oGqX!X905dB!rj28gF-=c2Qd6y>OOcUd|UYfMxQ{d
z01l*G325Yr$2n9TR4!U;@7Gv<L&e70{{rW;-(b}dBA(-3BL4$eAR<de1mFgYh@D^Y
z;yXeo%z6W`{+kLhTmBqu349LcDd9gud}_#q>1Cu0{EFAB7L-Bt-=eklUbOc7(bpB<
zcg9+spU~(q5e1L|sQmXP?wuq^G!o=9lGZ_x5+5|^n)NQ3Eq}C&;-8syFN2@MnKNVr
zNaufp*p#bDUcf-=KFG(t2Ee@qMMYIC+RW@}r0aw&VDTYQJ;!}CCZ5zD<7M|D4yQAR
zh=MG?RTl*~U?xN=#CvAFClGze-Upom_Jajx5QadYs1vLbehy3A4KqQX8ae#}B?TQI
zBf<$=z;zGz04j(?+^MaS%&2nvD(;<$g}lAzr4>CIGABA|wLg)s{sx}el(>v(dD^;g
z2eg3{No@_rR?I=o)>lA>e9t2dx2`ohyk_nBqo_PZ6g#-LUo)?_?@{i208|t8YZ4YR
zxkMPCE%3h7z1z6`W3rWhYuF(nfmw>50QEuNTbdeICPuBvSGadjc3-3ItGhie6&vfo
zy0zzzq4Fe@LttidKHR!yt@keB9vW_}Pu;~tXcJ;JsksZjE<6N&FkAT;I14(|Y=_jn
zYt~y5JgZ~t0&pYG1{!X!zRh^6t+8h9x#O6=ntqA?5ao}iM``>8ep6bx{Z{zN8g(J@
i<ttD97pVSe?z{luVM#mkZYO*I0000<MNUMnLSTX=xM3*(

diff --git a/browser/themes/pinstripe/devtools/csshtmltree.css b/browser/themes/pinstripe/devtools/csshtmltree.css
--- a/browser/themes/pinstripe/devtools/csshtmltree.css
+++ b/browser/themes/pinstripe/devtools/csshtmltree.css
@@ -19,16 +19,17 @@
  * the Initial Developer. All Rights Reserved.
  *
  * Contributor(s):
  *   Joe Walker <jwalker@mozilla.com> (original author)
  *   Mihai Șucan <mihai.sucan@gmail.com>
  *   Michael Ratcliffe <mratcliffe@mozilla.com>
  *   Dão Gottwald <dao@mozilla.com>
  *   Rob Campbell <rcampbell@mozilla.com>
+ *   Paul Rouget <paul@mozilla.com>
  *
  * Alternatively, the contents of this file may be used under the terms of
  * either the GNU General Public License Version 2 or later (the "GPL"), or
  * the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
  * in which case the provisions of the GPL or the LGPL are applicable instead
  * of those above. If you wish to allow use of your version of this file only
  * under the terms of either the GPL or the LGPL, and not to allow others to
  * use your version of this file under the terms of the MPL, indicate your
@@ -196,32 +197,40 @@
   margin: 0 5px;
 }
 
 /**
  * CSS Rule View
  */
 
 .ruleview {
-  background-color: #FFF;
+  background-color: #eeeeee;
+}
+
+.ruleview-property-name-and-colon {
+  display: inline-block;
+  min-width: 76px; /* Pseudo indentation */
+  margin-right: 4px;
 }
 
 .ruleview-rule-source {
-  background-color: -moz-dialog;
-  color: #0091ff;
-  padding: 2px 5px;
+  color: #45a946; /* green */
+  padding: 0 5px;
   cursor: pointer;
+  text-align: right;
+  float: right;
 }
 
 .ruleview-rule-source:hover {
   text-decoration: underline;
 }
 
-.ruleview-code {
-  padding: 2px 5px;
+.ruleview-rule {
+  padding: 8px 5px;
+  border-bottom: 1px dotted #cddae5;
 }
 
 .ruleview-warning {
   background: url("chrome://browser/skin/devtools/alerticon-warning.png");
   display: inline-block;
   -moz-margin-start: 5px;
   vertical-align: middle;
   width: 13px;
@@ -240,18 +249,26 @@
   list-style: none;
   padding: 0;
   margin: 0;
 }
 
 .ruleview-enableproperty {
   height: 10px;
   width: 10px;
+  margin: 0;
   -moz-margin-start: 2px;
   -moz-margin-end: 0;
+  -moz-transition: opacity 100ms;
+  -moz-transition-delay: 200ms;
+}
+
+.ruleview-property:not(:hover) > .ruleview-enableproperty {
+  opacity: 0;
+  -moz-transition: none;
 }
 
 .ruleview-expander {
   display: inline-block;
   width: 8px;
   height: 8px;
   background: url("chrome://browser/skin/devtools/arrows.png") 24px 0;
   cursor: pointer;
@@ -267,17 +284,17 @@
   /* (enable checkbox width: 12px) + (expander width: 15px) */
   -moz-margin-start: 27px;
 }
 
 .ruleview-propertyname {
   display: inline-block;
   padding: 1px 0;
   cursor: text;
-  color: #0060C0;
+  color: #dd0058; /* purple */
   text-decoration: inherit;
 }
 
 .ruleview-propertyvalue {
   cursor: text;
   text-decoration: inherit;
 }
 
diff --git a/browser/themes/winstripe/devtools/arrows.png b/browser/themes/winstripe/devtools/arrows.png
index 447d73938398ff2c09efafc33d14c82252229668..308b94ca0bbc7b39c742604b8baba829d26b91e0
GIT binary patch
literal 804
zc$@(w1Ka$GP)<h;3K|Lk000e1NJLTq001xm000OG1^@s6zbkx400001b5ch_0Itp)
z=>Px#24YJ`L;(K){{a7>y{D4^000SaNLh0L01FcU01FcV0GgZ_00007bV*G`2iyY%
z7CRZ4BxEcA00N{*L_t(I%axQ*ixgKB#eer!b&nlJoN*Uii4q8jgG!bm$tDY77J;Z>
z#y~!R*(VF9djyG}!DZ}Gf-WTZ0n|+(gv{U{1hJPPi=Z<DlQ>;nb&rcz-B#-mwKm0j
z@4j=-J@>q8<g?3Ic1y+PpS;6oGqX!X905dB!rj28gF-=c2Qd6y>OOcUd|UYfMxQ{d
z01l*G325Yr$2n9TR4!U;@7Gv<L&e70{{rW;-(b}dBA(-3BL4$eAR<de1mFgYh@D^Y
z;yXeo%z6W`{+kLhTmBqu349LcDd9gud}_#q>1Cu0{EFAB7L-Bt-=eklUbOc7(bpB<
zcg9+spU~(q5e1L|sQmXP?wuq^G!o=9lGZ_x5+5|^n)NQ3Eq}C&;-8syFN2@MnKNVr
zNaufp*p#bDUcf-=KFG(t2Ee@qMMYIC+RW@}r0aw&VDTYQJ;!}CCZ5zD<7M|D4yQAR
zh=MG?RTl*~U?xN=#CvAFClGze-Upom_Jajx5QadYs1vLbehy3A4KqQX8ae#}B?TQI
zBf<$=z;zGz04j(?+^MaS%&2nvD(;<$g}lAzr4>CIGABA|wLg)s{sx}el(>v(dD^;g
z2eg3{No@_rR?I=o)>lA>e9t2dx2`ohyk_nBqo_PZ6g#-LUo)?_?@{i208|t8YZ4YR
zxkMPCE%3h7z1z6`W3rWhYuF(nfmw>50QEuNTbdeICPuBvSGadjc3-3ItGhie6&vfo
zy0zzzq4Fe@LttidKHR!yt@keB9vW_}Pu;~tXcJ;JsksZjE<6N&FkAT;I14(|Y=_jn
zYt~y5JgZ~t0&pYG1{!X!zRh^6t+8h9x#O6=ntqA?5ao}iM``>8ep6bx{Z{zN8g(J@
i<ttD97pVSe?z{luVM#mkZYO*I0000<MNUMnLSTX=xM3*(

diff --git a/browser/themes/winstripe/devtools/csshtmltree.css b/browser/themes/winstripe/devtools/csshtmltree.css
--- a/browser/themes/winstripe/devtools/csshtmltree.css
+++ b/browser/themes/winstripe/devtools/csshtmltree.css
@@ -19,16 +19,17 @@
  * the Initial Developer. All Rights Reserved.
  *
  * Contributor(s):
  *   Joe Walker <jwalker@mozilla.com> (original author)
  *   Mihai Șucan <mihai.sucan@gmail.com>
  *   Michael Ratcliffe <mratcliffe@mozilla.com>
  *   Dão Gottwald <dao@mozilla.com>
  *   Rob Campbell <rcampbell@mozilla.com>
+ *   Paul Rouget <paul@mozilla.com>
  *
  * Alternatively, the contents of this file may be used under the terms of
  * either the GNU General Public License Version 2 or later (the "GPL"), or
  * the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
  * in which case the provisions of the GPL or the LGPL are applicable instead
  * of those above. If you wish to allow use of your version of this file only
  * under the terms of either the GPL or the LGPL, and not to allow others to
  * use your version of this file under the terms of the MPL, indicate your
@@ -194,32 +195,40 @@
   margin: 0 5px;
 }
 
 /**
  * CSS Rule View
  */
 
 .ruleview {
-  background-color: #FFF;
+  background-color: #eeeeee;
+}
+
+.ruleview-property-name-and-colon {
+  display: inline-block;
+  min-width: 76px; /* Pseudo indentation */
+  margin-right: 4px;
 }
 
 .ruleview-rule-source {
-  background-color: -moz-dialog;
-  color: #0091ff;
-  padding: 2px 5px;
+  color: #45a946; /* green */
+  padding: 0 5px;
   cursor: pointer;
+  text-align: right;
+  float: right;
 }
 
 .ruleview-rule-source:hover {
   text-decoration: underline;
 }
 
-.ruleview-code {
-  padding: 2px 5px;
+.ruleview-rule {
+  padding: 8px 5px;
+  border-bottom: 1px dotted #cddae5;
 }
 
 .ruleview-warning {
   background: url("chrome://browser/skin/devtools/alerticon-warning.png");
   display: inline-block;
   -moz-margin-start: 5px;
   vertical-align: middle;
   width: 13px;
@@ -238,18 +247,26 @@
   list-style: none;
   padding: 0;
   margin: 0;
 }
 
 .ruleview-enableproperty {
   height: 10px;
   width: 10px;
+  margin: 0;
   -moz-margin-start: 2px;
   -moz-margin-end: 0;
+  -moz-transition: opacity 100ms;
+  -moz-transition-delay: 200ms;
+}
+
+.ruleview-property:not(:hover) > .ruleview-enableproperty {
+  opacity: 0;
+  -moz-transition: none;
 }
 
 .ruleview-expander {
   display: inline-block;
   width: 8px;
   height: 8px;
   background: url("chrome://browser/skin/devtools/arrows.png") 24px 0;
   cursor: pointer;
@@ -265,17 +282,17 @@
   /* (enable checkbox width: 12px) + (expander width: 15px) */
   -moz-margin-start: 27px;
 }
 
 .ruleview-propertyname {
   display: inline-block;
   padding: 1px 0;
   cursor: text;
-  color: #0060C0;
+  color: #dd0058; /* purple */
   text-decoration: inherit;
 }
 
 .ruleview-propertyvalue {
   cursor: text;
   text-decoration: inherit;
 }
 
